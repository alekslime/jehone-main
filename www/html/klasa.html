<!DOCTYPE html>
<html lang="sq">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jehonë — Zgjidhni Klasën</title>

  <style>
    /* Reset and Base */
    ::before,*::after{box-sizing:border-box}
    *{margin:0;padding:0}
    html{scroll-behavior:smooth}
    :root{
      /* Theme Tokens */
      --primary:#6366f1;
      --primary-dark:#4f46e5;
      --primary-light:#a5b4fc;
      --secondary:#f59e0b;
      --accent:#10b981;
      --success:#22c55e;
      --warning:#f59e0b;
      --error:#ef4444;

      --text-primary:#0f172a;
      --text-secondary:#64748b;
      --text-muted:#94a3b8;

      --bg-primary:#ffffff;
      --bg-secondary:#f8fafc;
      --bg-tertiary:#f1f5f9;

      --surface:#ffffff;
      --surface-hover:#f8fafc;

      --border:#e2e8f0;
      --border-light:#f1f5f9;

      --shadow-sm:0 1px 2px 0 rgb(0 0 0 / 0.05);
      --shadow:0 4px 6px -1px rgb(0 0 0 / 0.1);
      --shadow-lg:0 10px 15px -3px rgb(0 0 0 / 0.1);
      --shadow-xl:0 20px 25px -5px rgb(0 0 0 / 0.1);

      --gradient-primary:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      --gradient-accent:linear-gradient(135deg,#4facfe 0%,#00f2fe 100%);
      --gradient-sheen:linear-gradient(90deg, rgba(255,255,255,.15), rgba(255,255,255,0), rgba(255,255,255,.15));

      --container-padding:2rem;
      --section-padding:5rem 0;

      --radius-sm:.375rem;
      --radius:.5rem;
      --radius-lg:.75rem;
      --radius-xl:1rem;
      --radius-2xl:1.5rem;

      --transition:all .32s cubic-bezier(.22,.61,.36,1);
      --transition-fast:all .18s cubic-bezier(.22,.61,.36,1);

      --focus-ring:0 0 0 3px rgba(99,102,241,.6);

      --font-size-base:16px;
      --font-size-lg:18px;
      --font-size-xl:20px;
    }

    /* Dark Theme */
    [data-theme="dark"]{
      --text-primary:#f8fafc;
      --text-secondary:#cbd5e1;
      --text-muted:#64748b;
      --bg-primary:#0f172a;
      --bg-secondary:#1e293b;
      --bg-tertiary:#334155;
      --surface:#1e293b;
      --surface-hover:#334155;
      --border:#334155;
      --border-light:#475569;
    }

    /* High Contrast */
    [data-high-contrast="true"]{
      --primary:#0000ff;
      --primary-dark:#0000cc;
      --primary-light:#3333ff;
      --text-primary:#000;
      --text-secondary:#333;
      --bg-primary:#fff;
      --bg-secondary:#f0f0f0;
      --border:#000;
      --focus-ring:0 0 0 4px #000;
    }
    [data-high-contrast="true"][data-theme="dark"]{
      --primary:#ffff00;
      --primary-dark:#cccc00;
      --primary-light:#ffff33;
      --text-primary:#fff;
      --text-secondary:#ccc;
      --bg-primary:#000;
      --bg-secondary:#333;
      --border:#fff;
      --focus-ring:0 0 0 4px #fff;
    }

    /* Font Size Scaling */
    [data-font-size="large"]{ --font-size-base:18px;--font-size-lg:20px;--font-size-xl:22px; }
    [data-font-size="extra-large"]{ --font-size-base:20px;--font-size-lg:22px;--font-size-xl:24px; }

    /* Base Typography */
    body{
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
      font-size:var(--font-size-base);
      line-height:1.6;
      color:var(--text-primary);
      background:var(--bg-primary);
      transition:var(--transition);
      overflow-x:hidden;
    }
    h1,h2,h3,h4,h5,h6{font-weight:800;line-height:1.2;color:var(--text-primary)}
    a{color:inherit}
    .container{max-width:1200px;margin:0 auto;padding:0 var(--container-padding)}

    /* Focus */
    a:focus,button:focus,input:focus,select:focus,textarea:focus,[tabindex]:focus{
      outline:none;box-shadow:var(--focus-ring);border-radius:var(--radius-sm)
    }

    /* Selection */
    ::selection{background:var(--primary-light);color:#fff}

    /* Extended gradient background: FIXED so it doesn't add extra scroll */
    .bg-extended{
      position:fixed; top:0; left:0; right:0;
      height:160vh; width:100%;
      z-index:0; pointer-events:none;
      background:
        radial-gradient(1200px 600px at 8% 10%, rgba(99,102,241,.10), transparent),
        radial-gradient(900px 500px at 92% 18%, rgba(79,70,229,.10), transparent);
    }

    /* Skip Links */
    .skip-links{
      position:absolute;top:-100px;left:0;z-index:1001;display:flex;gap:1rem;
      padding:1rem;background:var(--primary);transition:top .3s;
    }
    .skip-links:focus-within{top:0}
    .skip-link{
      background:var(--primary);color:#fff;padding:.5rem 1rem;border-radius:var(--radius);
      text-decoration:none;font-weight:700;
    }
    .skip-link:focus{background:var(--primary-dark)}
    .sr-only{
      position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;
      clip:rect(0,0,0,0);white-space:nowrap;border:0;
    }

    /* Reading Progress */
    .reading-progress{
      position:fixed;top:70px;left:0;width:100%;height:4px;background:var(--border);z-index:999;
    }
    .reading-progress-bar{ height:100%;background:var(--primary);width:0%;transition:width .1s linear; }

    /* Navbar */
    .navbar{
      position:fixed;top:0;left:0;right:0;z-index:1000;
      background:rgba(255,255,255,.72);backdrop-filter:blur(16px);
      border-bottom:1px solid var(--border-light);transition:var(--transition);
    }
    [data-theme="dark"] .navbar{background:rgba(15,23,42,.72)}
    .nav-container{
      max-width:1200px;margin:0 auto;padding:0 var(--container-padding);
      display:flex;align-items:center;justify-content:space-between;height:70px;
    }
    .nav-left{display:flex;align-items:center;gap:.75rem}
    .nav-brand{display:flex;align-items:center;gap:.6rem;text-decoration:none;}
    .brand-icon{
      width:36px;height:36px;border-radius:50%;
      display:grid;place-items:center;font-size:18px;font-weight:900;color:#fff;
      background:var(--gradient-primary);box-shadow:var(--shadow);
    }
    .brand-text{font-weight:900;font-size:1.15rem;color:var(--primary)}
    .nav-links{display:flex;align-items:center;gap:.5rem}
    .nav-link{
      display:inline-flex;align-items:center;gap:.5rem;padding:.5rem .75rem;
      text-decoration:none;color:var(--text-secondary);border-radius:var(--radius);
      transition:var(--transition);font-weight:700;
    }
    .nav-link:hover,.nav-link.active{color:var(--primary);background:var(--surface-hover)}
    .nav-right{display:flex;align-items:center;gap:.5rem}
    .icon-btn{
      background:var(--surface);border:1px solid var(--border);border-radius:50%;
      width:40px;height:40px;display:flex;align-items:center;justify-content:center;
      cursor:pointer;transition:var(--transition);font-size:1.1rem;
    }
    .icon-btn:hover{background:var(--primary);color:#fff;transform:translateY(-1px)}

    /* Hero */
    .hero{
      /* Reduced top padding to tighten space under navbar */
      padding-top:88px; /* navbar is 70px + progress bar 4px */
      position:relative; overflow:hidden; z-index:1;
    }
    .orb{
      position:absolute;filter:blur(30px);opacity:.22;border-radius:50%;pointer-events:none;
      animation:floatY 10s ease-in-out infinite;
    }
    .orb.one{width:280px;height:280px;left:5%;top:8%;background:var(--gradient-primary);animation-delay:0s}
    .orb.two{width:200px;height:200px;right:10%;top:24%;background:var(--gradient-accent);animation-delay:1.2s}
    .orb.three{width:160px;height:160px;left:20%;bottom:-20px;background:var(--gradient-primary);animation-delay:2.1s}
    @keyframes floatY{0%,100%{transform:translateY(0)}50%{transform:translateY(-16px)}}

    .hero-inner{
      padding:2.6rem 0 1rem; /* slightly tighter */
      display:grid;grid-template-columns:1fr;gap:1.1rem;text-align:center;position:relative;z-index:1;
    }
    .hero-badge{
      display:inline-flex;gap:.5rem;align-items:center;margin:0 auto 1rem;
      padding:.4rem .9rem;border-radius:999px;background:var(--surface);
      border:1px solid var(--border);color:var(--text-secondary);font-weight:800;box-shadow:var(--shadow-sm)
    }
    .hero-title{
      font-size:clamp(2.1rem,5vw,3.6rem);
      font-weight:900;line-height:1.06;margin:0 auto;
      max-width:920px;letter-spacing:-.02em;position:relative;
    }
    .gradient-text{
      background:linear-gradient(90deg,#7c83ff,#8a63f8,#7c83ff);
      -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;
      background-size:320% 100%; /* larger gradient sweep */
      animation:shine 8s ease-in-out infinite;
      text-shadow: 0 0 0 transparent;
    }
    @keyframes shine{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
    .hero-sub{color:var(--text-secondary);font-size:var(--font-size-lg);max-width:820px;margin:0 auto}

    /* Classes Grid */
    .classes{padding:2.2rem 0 3.2rem; position:relative; z-index:1;}
    .grid{
      display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1.6rem;margin-top:1.8rem;
    }
    .card{
      position:relative;overflow:hidden;text-decoration:none;color:var(--text-primary);
      border:1px solid var(--border);border-radius:1.25rem;background:linear-gradient(180deg, var(--surface), var(--bg-secondary));
      padding:1.8rem;box-shadow:var(--shadow-sm);transition:var(--transition);
      display:flex;flex-direction:column;align-items:center;text-align:center;
      transform:perspective(1000px) rotateX(var(--rx,0)) rotateY(var(--ry,0)) translateY(0);
      will-change:transform, box-shadow;
    }
    .card::before{
      content:"";position:absolute;inset:0;border-radius:inherit;pointer-events:none;
      background:linear-gradient(135deg, rgba(99,102,241,.22), rgba(79,70,229,.10));
      opacity:0;transition:var(--transition);
    }
    .card:hover{transform:perspective(1000px) rotateX(var(--rx,0)) rotateY(var(--ry,0)) translateY(-6px);box-shadow:var(--shadow-lg);border-color:var(--primary-light)}
    .card:hover::before{opacity:1}
    .card-top{position:absolute;top:0;left:0;right:0;height:4px;background:var(--gradient-primary);transform:scaleX(0);transition:transform .25s ease}
    .card:hover .card-top{transform:scaleX(1)}
    .icon-bubble{
      width:66px;height:66px;border-radius:999px;
      background:var(--gradient-accent);
      display:grid;place-items:center;color:#fff;font-size:30px;box-shadow:var(--shadow);
      margin-bottom:.9rem;transform:translateZ(0);animation:floatY 8s ease-in-out infinite;
    }
    .card h3{font-size:1.35rem;margin:.2rem 0 .35rem}
    .card p{color:var(--text-secondary);margin-bottom:1.1rem}
    .badge{
      position:absolute;top:1rem;right:1rem;width:42px;height:42px;border-radius:999px;
      background:var(--primary);color:#fff;font-weight:900;display:grid;place-items:center;box-shadow:var(--shadow);
    }
    .card-cta{
      position:relative;overflow:hidden;
      display:inline-flex;align-items:center;gap:.5rem;padding:.6rem 1rem;border-radius:999px;
      border:1px solid var(--border);background:var(--surface);transition:var(--transition);font-weight:800;
    }
    .card-cta:hover{border-color:var(--primary);box-shadow:var(--shadow);transform:translateY(-1px)}
    .card-cta::after{
      content:"";position:absolute;inset:-200%;background:var(--gradient-sheen);transform:translateX(-60%) skewX(-20deg);
      opacity:.0;transition:opacity .25s ease;
    }
    .card-cta:hover::after{animation:sheenMove 1.2s ease;opacity:.9}
    @keyframes sheenMove{0%{transform:translateX(-60%) skewX(-20deg)}100%{transform:translateX(60%) skewX(-20deg)}}

    /* Footer */
    .footer{
      border-top:1px solid var(--border);background:var(--bg-tertiary);padding:2rem 0 1.25rem;margin-top:2rem;text-align:center;
      position:relative;z-index:1;
    }
    .footer-brand{display:flex;justify-content:center;align-items:center;gap:.6rem;color:var(--primary);font-weight:900}
    .brand-dot{width:24px;height:24px;border-radius:999px;background:var(--gradient-primary);box-shadow:var(--shadow)}
    .footer-text{color:var(--text-secondary);margin-top:.5rem}
    .foot-links{display:flex;gap:1rem;flex-wrap:wrap;justify-content:center;margin-top:.9rem}
    .foot-links a{text-decoration:none;color:var(--text-secondary);font-weight:700}
    .foot-links a:hover{color:var(--primary)}
    .copy{margin-top:1rem;color:var(--text-muted);font-size:.9rem}

    /* Accessibility Toolbar */
    .accessibility-toolbar{
      position:fixed;top:70px;right:-320px;width:320px;height:calc(100vh - 70px);
      background:var(--surface);border-left:1px solid var(--border);z-index:1002;
      transition:right .3s ease;overflow-y:auto;box-shadow:var(--shadow-lg);
    }
    .accessibility-toolbar.open{right:0}
    .toolbar-content{padding:1.25rem}
    .toolbar-section{margin-bottom:1.25rem}
    .toolbar-section h3{font-size:1rem;margin-bottom:.75rem;color:var(--text-primary)}
    .toolbar-button{
      width:100%;background:var(--surface);border:1px solid var(--border);padding:.6rem .75rem;margin-bottom:.5rem;
      border-radius:var(--radius);cursor:pointer;transition:var(--transition);text-align:left;font-size:var(--font-size-base);font-weight:700;
    }
    .toolbar-button:hover{background:var(--surface-hover);border-color:var(--primary)}
    .toolbar-button.active{background:var(--primary);color:#fff;border-color:var(--primary)}

    /* Reveal animations */
    .reveal{opacity:0;transform:translateY(12px);transition:opacity .6s ease, transform .6s ease}
    .reveal.in{opacity:1;transform:translateY(0)}

    /* Ripple */
    .ripple{
      position:absolute;border-radius:50%;transform:scale(0);animation:ripple .6s linear;pointer-events:none;background:rgba(99,102,241,.22);
    }
    @keyframes ripple{to{transform:scale(12);opacity:0}}

    /* Responsive */
    @media (max-width: 900px){ .nav-links{display:none} }
    @media (max-width: 768px){
      :root{--container-padding:1rem}
      .grid{grid-template-columns:1fr}
    }

    /* Reduced motion */

  </style>
</head>
<body>
   Extended gradient layer 
  <div class="bg-extended" aria-hidden="true"></div>

   Skip Links 
  <div class="skip-links">
    <a href="#main" class="skip-link">Kalo te përmbajtja</a>
    <a href="#klasat" class="skip-link">Kalo te klasat</a>
    <a href="#akses" class="skip-link">Kalo te aksesueshmëria</a>
  </div>

   Reading Progress 
  <div class="reading-progress" role="progressbar" aria-label="Progresi i leximit">
    <div class="reading-progress-bar"></div>
  </div>

   Navbar 
  <header class="navbar" role="banner">
    <div class="nav-container">
      <div class="nav-left">
        <a href="index.html" class="nav-brand" aria-label="Jehonë, kthehu në kryefaqe">
          <span class="brand-icon" aria-hidden="true">📚</span>
          <span class="brand-text">Jehonë</span>
        </a>
      </div>

      <nav class="nav-links" role="navigation" aria-label="Navigimi kryesor">
        <a class="nav-link" href="index.html">Kryefaqja</a>
        <a class="nav-link active" href="mesimet.html">Mësimet</a>
        <a class="nav-link" href="about.html">Rreth nesh</a>
      </nav>

      <div class="nav-right">
        <button class="icon-btn" id="themeToggle" aria-label="Ndrysho temën">
          <span class="theme-icon" aria-hidden="true">🌙</span>
        </button>
        <button class="icon-btn" id="accessibilityToggle" aria-label="Hap panelin e aksesueshmërisë">♿</button>
      </div>
    </div>
  </header>

   Accessibility Toolbar 
  <aside class="accessibility-toolbar" id="akses" role="dialog" aria-label="Paneli i aksesueshmërisë">
    <div class="toolbar-content">
      <div class="toolbar-section">
        <h3>Madhësia e Tekstit</h3>
        <button class="toolbar-button" data-font-size="normal">Normal</button>
        <button class="toolbar-button" data-font-size="large">I madh</button>
        <button class="toolbar-button" data-font-size="extra-large">Shumë i madh</button>
      </div>
      <div class="toolbar-section">
        <h3>Kontrasti</h3>
        <button class="toolbar-button" id="contrastToggle">Kontrast i lartë</button>
      </div>
      <div class="toolbar-section">
        <h3>Shkurtesa Tastiere</h3>
        <button class="toolbar-button" id="showShortcuts">Shfaq shkurtesat</button>
      </div>
    </div>
  </aside>

  <main id="main">
     Hero 
    <section class="hero" aria-label="Përzgjedhja e klasës">
      <div class="orb one" aria-hidden="true"></div>
      <div class="orb two" aria-hidden="true"></div>
      <div class="orb three" aria-hidden="true"></div>

      <div class="container hero-inner reveal">
        <span class="hero-badge">🎓 Zgjedhja e Klasës</span>
        <h1 class="hero-title">
          Zgjidh <span class="gradient-text">Klasën</span> tënde dhe vazhdo mësimin
        </h1>
        <p class="hero-sub">Materiale të strukturuara, të aksesueshme dhe të personalizuara për çdo klasë.</p>
      </div>
    </section>

     Classes 
    <section class="classes">
      <div class="container">
        <div id="klasat" class="grid">
          <a class="card reveal" href="mesimet.html" aria-label="Klasa e Dhjetë">
            <div class="card-top" aria-hidden="true"></div>
            <div class="badge" aria-hidden="true">X</div>
            <div class="icon-bubble" aria-hidden="true">🎒</div>
            <h3>Klasa e Dhjetë</h3>
            <p>Materialet për klasën e 10-të</p>
            <span class="card-cta">Fillo mësimin →</span>
          </a>

          <a class="card reveal" href="mesimet.html" aria-label="Klasa e Njëmbëdhjetë">
            <div class="card-top" aria-hidden="true"></div>
            <div class="badge" aria-hidden="true">XI</div>
            <div class="icon-bubble" aria-hidden="true">📘</div>
            <h3>Klasa e Njëmbëdhjetë</h3>
            <p>Materialet për klasën e 11-të</p>
            <span class="card-cta">Fillo mësimin →</span>
          </a>

          <a class="card reveal" href="mesimet12.html" aria-label="Klasa e Dymbëdhjetë">
            <div class="card-top" aria-hidden="true"></div>
            <div class="badge" aria-hidden="true">XII</div>
            <div class="icon-bubble" aria-hidden="true">🎓</div>
            <h3>Klasa e Dymbëdhjetë</h3>
            <p>Materialet për klasën e 12-të</p>
            <span class="card-cta">Fillo mësimin →</span>
          </a>
        </div>
      </div>
    </section>
  </main>

   Footer 
  <footer class="footer">
    <div class="container reveal">
      <div class="footer-brand">
        <span class="brand-dot" aria-hidden="true"></span>
        <strong>Jehonë</strong>
      </div>
      <p class="footer-text">Platformë edukative moderne në gjuhën shqipe me fokus në aksesueshmëri.</p>
      <div class="foot-links" role="navigation" aria-label="Linqe në fund">
        <a href="about.html">Rreth nesh</a>
        <a href="#" onclick="document.getElementById('akses').scrollIntoView({behavior:'smooth'})">Aksesueshmëria</a>
        <a href="#">Privatësia</a>
        <a href="#">Kushtet</a>
      </div>
      <p class="copy">© 2025 Jehonë. Të gjitha të drejtat e rezervuara.</p>
    </div>
  </footer>

  <script>
    // Preferences
    const prefs = { theme:'light', highContrast:false, fontSize:'normal' }; // normal | large | extra-large
    function loadPrefs(){ try{ Object.assign(prefs, JSON.parse(localStorage.getItem('jehone_prefs')||'{}')); }catch{} }
    function savePrefs(){ localStorage.setItem('jehone_prefs', JSON.stringify(prefs)); }

    // Apply preferences
    function applyTheme(){
      const icon = document.querySelector('.theme-icon');
      if(prefs.theme==='dark'){ document.body.setAttribute('data-theme','dark'); if(icon) icon.textContent='☀'; }
      else{ document.body.removeAttribute('data-theme'); if(icon) icon.textContent='🌙'; }
    }
    function applyContrast(){
      if(prefs.highContrast){ document.body.setAttribute('data-high-contrast','true'); }
      else{ document.body.removeAttribute('data-high-contrast'); }
      const btn = document.getElementById('contrastToggle');
      if(btn){
        if(prefs.highContrast){ btn.textContent='Kontrast normal'; btn.classList.add('active'); }
        else{ btn.textContent='Kontrast i lartë'; btn.classList.remove('active'); }
      }
    }
    function applyFontSize(){
      document.body.setAttribute('data-font-size', prefs.fontSize);
      document.querySelectorAll('.toolbar-button[data-font-size]').forEach(btn=>{
        btn.classList.toggle('active', btn.getAttribute('data-font-size')===prefs.fontSize);
      });
    }

    // Announce helper
    function announce(msg, priority='polite'){
      const el = document.createElement('div');
      el.setAttribute('aria-live', priority);
      el.className='sr-only';
      el.textContent=msg;
      document.body.appendChild(el);
      setTimeout(()=>document.body.removeChild(el), 900);
    }

    // Actions
    function toggleTheme(){ prefs.theme = prefs.theme==='dark'?'light':'dark'; savePrefs(); applyTheme(); announce(prefs.theme==='dark'?'Tema e errët u aktivizua':'Tema e ndritshme u aktivizua'); }
    function toggleContrast(){ prefs.highContrast=!prefs.highContrast; savePrefs(); applyContrast(); announce(prefs.highContrast?'Modaliteti me kontrast të lartë u aktivizua':'Modaliteti me kontrast të lartë u çaktivizua'); }
    function setFontSize(size){ prefs.fontSize=size; savePrefs(); applyFontSize(); announce('Madhësia e tekstit u ndryshua'); }
    function toggleAkses(){
      const panel=document.querySelector('.accessibility-toolbar');
      panel.classList.toggle('open');
      announce(panel.classList.contains('open')?'Paneli i aksesueshmërisë u hap':'Paneli i aksesueshmërisë u mbyll');
    }

    // Reading progress
    function updateReadingProgress(){
      const bar=document.querySelector('.reading-progress-bar');
      const st=window.pageYOffset || document.documentElement.scrollTop;
      const dh=document.documentElement.scrollHeight - window.innerHeight;
      const pct= dh>0 ? (st/dh)*100 : 0;
      if(bar) bar.style.width=pct+'%';
    }

    // Reveal on scroll
    function setupReveal(){
      const els=[...document.querySelectorAll('.reveal')];
      if(!('IntersectionObserver' in window)){ els.forEach(el=>el.classList.add('in')); return; }
      const io=new IntersectionObserver((entries)=>{
        entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('in'); io.unobserve(e.target); } });
      },{threshold:.12, rootMargin:'0px 0px -40px 0px'});
      els.forEach(el=>io.observe(el));
    }

    // Card tilt and ripple
    function setupCardEffects(){
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      document.querySelectorAll('.card').forEach(card=>{
        if(!prefersReduced){
          card.addEventListener('pointermove',(e)=>{
            const rect=card.getBoundingClientRect();
            const px=(e.clientX - rect.left)/rect.width;
            const py=(e.clientY - rect.top)/rect.height;
            const ry=(px - 0.5)*6;   // rotateY
            const rx=(0.5 - py)*6;   // rotateX
            card.style.setProperty('--rx', rx+'deg');
            card.style.setProperty('--ry', ry+'deg');
          });
          card.addEventListener('pointerleave',()=>{
            card.style.setProperty('--rx','0deg');
            card.style.setProperty('--ry','0deg');
          });
        }
        // Ripple on click
        card.addEventListener('click', function(ev){
          const r=document.createElement('span');
          r.className='ripple';
          const rect=this.getBoundingClientRect();
          const size=Math.max(rect.width, rect.height);
          r.style.width=r.style.height=size+'px';
          r.style.left=(ev.clientX - rect.left - size/2)+'px';
          r.style.top=(ev.clientY - rect.top - size/2)+'px';
          this.appendChild(r);
          setTimeout(()=>r.remove(),600);
          // Micro scale
          this.style.transform += ' scale(.985)';
          setTimeout(()=>{ this.style.transform=this.style.transform.replace(' scale(.985)',''); },140);
        });
        // Keyboard activation
        card.addEventListener('keydown',(e)=>{
          if(e.key===' '||e.key==='Enter'){ e.preventDefault(); card.click(); }
        });
      });
    }

    // Init
    document.addEventListener('DOMContentLoaded', ()=>{
      loadPrefs(); applyTheme(); applyContrast(); applyFontSize();

      // Navbar background + progress
      window.addEventListener('scroll', ()=>{
        const nav=document.querySelector('.navbar');
        if(window.scrollY>50){
          nav.style.background = document.body.getAttribute('data-theme')==='dark'
            ? 'rgba(15,23,42,.92)' : 'rgba(255,255,255,.92)';
        }else{
          nav.style.background = document.body.getAttribute('data-theme')==='dark'
            ? 'rgba(15,23,42,.72)' : 'rgba(255,255,255,.72)';
        }
        updateReadingProgress();
      });
      updateReadingProgress();

      // Toolbar controls
      document.getElementById('themeToggle')?.addEventListener('click', toggleTheme);
      document.getElementById('accessibilityToggle')?.addEventListener('click', toggleAkses);
      document.getElementById('contrastToggle')?.addEventListener('click', toggleContrast);
      document.getElementById('showShortcuts')?.addEventListener('click', ()=>{
        const t = [
          'Shkurtesat:',
          'Ctrl + H: Kryefaqja',
          'Ctrl + S: Shko te klasat',
          'Ctrl + T: Ndrysho temën',
          'Ctrl + Plus: Zmadho tekstin',
          'Ctrl + Minus: Zvogëlo tekstin',
          'Esc: Mbyll panelin e aksesueshmërisë'
        ].join('\n');
        alert(t); announce('U shfaqën shkurtesat e tastierës');
      });
      document.querySelectorAll('.toolbar-button[data-font-size]').forEach(btn=>{
        btn.addEventListener('click', ()=> setFontSize(btn.getAttribute('data-font-size')));
      });

      // Reveal + effects
      setupReveal();
      setupCardEffects();

      // Intro announce
      setTimeout(()=>announce('Faqja Zgjidhni Klasën u ngarkua.'),600);
    });

    // Keyboard Shortcuts
    document.addEventListener('keydown',(e)=>{
      if(e.ctrlKey){
        switch(e.key.toLowerCase()){
          case 'h': e.preventDefault(); location.href='index.html'; break;
          case 's': e.preventDefault(); document.getElementById('klasat')?.scrollIntoView({behavior:'smooth'}); break;
          case 't': e.preventDefault(); toggleTheme(); break;
          case '=': case '+': e.preventDefault(); prefs.fontSize==='normal'?setFontSize('large'):prefs.fontSize==='large'?setFontSize('extra-large'):null; break;
          case '-': e.preventDefault(); prefs.fontSize==='extra-large'?setFontSize('large'):prefs.fontSize==='large'?setFontSize('normal'):null; break;
        }
      }
      if(e.key==='Escape'){
        const panel=document.querySelector('.accessibility-toolbar');
        if(panel.classList.contains('open')) toggleAkses();
      }
    });
  </script>
</body>
</html>